<!DOCTYPE html><html lang="zh-Hant"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>歷史紀錄</title><link rel="manifest" href="manifest.json"><link rel="stylesheet" href="styles.css">
<link rel="apple-touch-icon" href="icons/icon-512.png"><script>if('serviceWorker' in navigator){addEventListener('load',()=>navigator.serviceWorker.register('./sw.js'));}</script>
</head><body><header class="appbar"><div class="bar"><h1 class="title">歷 史 紀 錄</h1></div></header>
<div class="appbar"><div class="row" style="gap:12px;justify-content:center"><select class="pill"><option>Moira</option></select><span class="pill">🐭</span><span class="pill amber">x0.75</span></div></div>
<main class="wrap"><div id="box" class="list"></div></main><nav class="tabbar"><div class="in"><a class='' href='index.html'><span class='ico'><svg width='22' height='22' viewBox='0 0 24 24' fill='none' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M3 10l9-7 9 7v7a2 2 0 0 1-2 2h-3m-8 0H6a2 2 0 0 1-2-2v-7'/></svg></span>發音練習</a><a class='' href='travel.html'><span class='ico'><svg width='22' height='22' viewBox='0 0 24 24' fill='none' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M6 7V6a3 3 0 0 1 6 0v1m-8 0h14l-1 11a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 7z'/></svg></span>旅行會話</a><a class='' href='translate.html'><span class='ico'><svg width='22' height='22' viewBox='0 0 24 24' fill='none' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M11 19a8 8 0 1 1 5.3-14.1M21 21l-4.3-4.3'/></svg></span>實時翻譯</a><a class='active' href='history.html'><span class='ico'><svg width='22' height='22' viewBox='0 0 24 24' fill='none' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M12 8v5l3 3M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0'/></svg></span>歷史紀錄</a></div></nav>
<script>
function speakKO(t){const u=new SpeechSynthesisUtterance(t);u.lang='ko-KR';u.rate=0.75;const v=speechSynthesis.getVoices().find(v=>/ko/i.test(v.lang||''));if(v)u.voice=v;speechSynthesis.speak(u);}function speakEN(t){const v=speechSynthesis.getVoices().find(v=>['Daniel','Moira','Samantha','Tessa'].includes(v.name));const u=new SpeechSynthesisUtterance(t);if(v)u.voice=v;u.rate=0.75;speechSynthesis.speak(u);}
function hist(){try{return JSON.parse(localStorage.getItem('history')||'[]');}catch(e){return [];}}function favs(){try{return JSON.parse(localStorage.getItem('favorites')||'[]');}catch(e){return [];}}function saveFav(entry){const f=favs();f.unshift(entry);localStorage.setItem('favorites',JSON.stringify(f));}
function render(){const box=document.getElementById('box');box.innerHTML='';const H=hist();if(!H.length){box.innerHTML="<div class='card'>尚無歷史。</div>";return;}H.forEach(it=>{const c=document.createElement('div');c.className='card';c.innerHTML=`<div class='ko'>${it.ko}</div><div class='en'>${it.en}</div><div class='zh'>${it.zh}</div><div class='badges'><span class='badge' data-ko='${it.ko}'>韓</span><span class='badge' data-en='${it.en}'>英</span><span class='star' data-star='1'>☆</span></div>`;box.appendChild(c);});}
document.addEventListener('click',(e)=>{if(e.target.matches('[data-ko]'))return speakKO(e.target.getAttribute('data-ko'));if(e.target.matches('[data-en]'))return speakEN(e.target.getAttribute('data-en'));if(e.target.matches('[data-star]')){const c=e.target.closest('.card');saveFav({ko:c.querySelector('.ko').textContent,en:c.querySelector('.en').textContent,zh:c.querySelector('.zh').textContent,folder:'其他',ts:Date.now()});e.target.classList.add('on');e.target.textContent='★';}});
render();
</script></body></html>
